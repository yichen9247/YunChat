<script setup lang="ts">
    import utils from "@/scripts/utils"
    import { reactive, Reactive } from "vue"
    import HandUtils from "@/scripts/HandUtils"
    import { sidebarListType } from "../../types"
    import { ToastType } from "@/enums/ToastType"
    import { Router, useRouter } from 'vue-router'
    import dialogViews from "@/scripts/dialogLayout"
    import { openGithubSite } from "@/scripts/action"
    import { StorageType } from "@/enums/StorageType"
    import { UserAuthType } from "@/enums/UserAuthType"
    import { DialogServiceImpl } from "@/service/impl/DialogServiceImpl"

    const router: Router = useRouter();
    const dialogServiceImpl = new DialogServiceImpl();
    const applicationStore = utils.useApplicationStore();

    const menuList1: Reactive<sidebarListType[]> = reactive([{
        key: 'home',
        name: '聊天',
        call: (): void => {
            router.push("/");
        },
        icon: '<svg t="1749437656096" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="53104" width="36" height="36"><path d="M512 457.031816A55.033029 55.033029 0 1 0 567.033029 512.064845 55.033029 55.033029 0 0 0 512 457.031816z m220.132117 0A55.033029 55.033029 0 1 0 786.738533 512.064845a55.033029 55.033029 0 0 0-55.033029-55.033029z m-439.837621 0A55.033029 55.033029 0 1 0 346.900913 512.064845a55.033029 55.033029 0 0 0-55.03303-55.033029z" fill="#ffffff" p-id="53105"></path><path d="M917.70861 637.062345a405.70861 405.70861 0 0 1-93.854778 127.983789A442.823909 442.823909 0 0 1 682.645052 853.354948a475.246469 475.246469 0 0 1-324.225598 7.252415 35.835461 35.835461 0 0 0-29.436272 2.986288L213.37116 929.718609l-18.344343-154.860384a35.835461 35.835461 0 0 0-10.238703-20.904019 389.923943 389.923943 0 0 1-115.18541-274.738533 378.832015 378.832015 0 0 1 34.12901-157.846673 405.70861 405.70861 0 0 1 93.854778-127.983789A442.823909 442.823909 0 0 1 341.354948 104.223172a474.393244 474.393244 0 0 1 343.849779 0 441.117458 441.117458 0 0 1 138.649105 87.882201 406.135223 406.135223 0 0 1 93.854778 127.983789 380.111852 380.111852 0 0 1 0 315.266733zM981.273892 291.932729a476.099694 476.099694 0 0 0-110.492671-152.300709 511.935155 511.935155 0 0 0-160.406348-102.387031 546.91739 546.91739 0 0 0-396.749746 0 511.935155 511.935155 0 0 0-162.539411 102.387031A478.232757 478.232757 0 0 0 42.726108 291.932729a451.782774 451.782774 0 0 0-42.661263 187.282944 461.168252 461.168252 0 0 0 127.983789 316.119958l23.037082 196.668422a36.262073 36.262073 0 0 0 35.835461 31.995947 36.262073 36.262073 0 0 0 17.91773-4.692739l148.461195-85.322526a547.344003 547.344003 0 0 0 358.354608-13.651604 511.935155 511.935155 0 0 0 162.539412-102.387031A477.806145 477.806145 0 0 0 981.273892 666.925229a453.915837 453.915837 0 0 0 0-374.9925z" fill="#ffffff" p-id="53106"></path></svg>'
    }, {
        key: 'search',
        name: '搜索',
        call: (): void => dialogServiceImpl.openCustomSwalDialog(dialogViews.SearchCenter, {
            width: 450,
            title: "搜索群聊"
        }),
        icon: '<svg t="1749605796925" class="icon" viewBox="0 0 1076 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11057" width="36" height="36"><path d="M1001.422567 892.193936l-219.239171-205.664722c126.476058-173.789709 106.705148-418.628663-54.087747-569.496719-174.157296-163.366002-447.720519-154.622692-611.060266 19.56086-163.366002 174.183552-154.622692 447.799288 19.534604 611.191546 160.76664 150.841801 406.340767 154.964022 571.649727 17.591646l219.239171 205.664722a54.061491 54.061491 0 1 0 73.937425-78.847333zM186.456744 694.589864c-144.750365-135.797005-152.023329-363.254362-16.226324-508.057239 135.770749-144.776621 363.20185-152.023329 507.952215-16.226325s152.023329 363.280618 16.25258 508.05724c-135.797005 144.750365-363.228106 152.023329-507.978471 16.226324z" fill="#ffffff" p-id="11058"></path></svg>'
    }, {
        key: 'friend',
        name: '联系',
        call: (): Promise<void> => utils.showToasts(ToastType.WARNING, "暂不支持此功能"),
        icon: '<svg t="1749437802569" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="59488" width="36" height="36"><path d="M925.375198 814.828718c-15.353678-44.43535-37.751984-85.980596-66.653025-123.55195-28.539778-37.21009-62.679132-69.362498-101.334274-95.734697-35.223143-24.02399-73.697654-42.809667-114.159111-55.634504 40.280826-22.398307 74.239548-54.189451 98.986065-92.663961 28.359146-44.074087 43.351561-95.012171 43.351561-147.57594C785.566414 147.395308 661.833833 23.482096 509.922738 23.482096 357.650379 23.482096 233.737167 147.395308 233.737167 299.667666c0 52.383136 14.992415 103.321221 43.351561 147.395308 24.927148 38.655142 58.885871 70.626918 98.986065 92.844593-40.461457 13.005468-78.574705 31.610513-113.97848 55.634504-38.655142 26.3722-72.794496 58.524608-101.514905 95.734697-28.901041 37.571353-51.479979 79.116599-66.833657 123.55195-16.076204 46.061034-24.204622 94.289645-24.204622 143.421414 0 23.120833 18.966308 42.087141 42.087141 42.087141s42.087141-18.966308 42.08714-42.087141c0-195.985183 159.497619-355.482801 355.482802-355.482801S864.683013 762.26495 864.683013 958.250132c0 23.120833 18.966308 42.087141 42.08714 42.087141s42.087141-18.966308 42.087141-42.087141c0.361263-49.131769-7.586523-97.360381-23.482096-143.421414z m-223.983065-515.341683c0 105.488799-85.799965 191.469395-191.469395 191.469395h-0.903158c-50.576821 0-98.263539-19.688834-134.209208-55.453872-36.306932-36.126301-56.357029-84.354913-56.357029-135.473629 0-105.850062 85.799965-192.011289 191.469395-192.011289s191.469395 85.799965 191.469395 191.469395z" fill="#ffffff" p-id="59489"></path></svg>'
    }, {
        key: 'forum',
        name: '星球',
        call: (): Promise<void> => utils.showToasts(ToastType.WARNING, "暂不支持此功能"),
        icon: '<svg t="1749438042843" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="66476" width="36" height="36"><path d="M886.64746667 274.97813333c52.4288-88.4736 63.35146667-145.8176 33.31413333-175.85493333-29.4912-29.4912-76.45866667-22.9376-152.3712 21.2992-8.192 4.9152-13.65333333 12.01493333-16.384 20.20693333-2.73066667 8.73813333-1.6384 18.56853333 3.2768 26.2144 9.28426667 15.29173333 27.8528 20.75306667 45.32906667 13.65333334l1.09226666-0.54613334c39.3216-21.84533333 60.07466667-27.30666667 69.35893334-28.39893333-1.6384 13.65333333-14.7456 50.7904-64.98986667 123.97226667-40.96 59.52853333-116.3264 157.2864-243.02933333 282.89706666-125.06453333 126.1568-223.36853333 201.5232-283.4432 242.4832-67.72053333 45.8752-108.1344 62.2592-123.42613334 64.98986667 2.18453333-13.1072 11.4688-45.8752 50.7904-107.04213333l0.54613334-1.09226667c6.5536-12.56106667 6.00746667-25.66826667-1.09226667-36.0448C164.11306667 662.18666667 140.62933333 586.82026667 140.62933333 509.81546667c0-205.89226667 167.66293333-373.5552 373.5552-373.5552 55.7056 0 108.68053333 12.56106667 161.65546667 37.6832l0.54613333 0.54613333c8.192 3.2768 16.93013333 3.2768 25.12213334 0.54613333 8.73813333-3.2768 15.29173333-9.28426667 18.56853333-18.0224 7.09973333-17.47626667-0.54613333-37.13706667-16.93013333-43.69066666-64.44373333-29.4912-126.70293333-44.2368-191.14666667-44.2368-243.02933333 0-441.27573333 197.70026667-441.27573333 441.27573333 0 81.37386667 22.9376 161.10933333 66.08213333 232.10666667-54.0672 87.38133333-64.98986667 142.5408-33.31413333 173.6704l1.09226666 1.09226666c10.37653333 7.64586667 24.02986667 15.83786667 45.32906667 15.83786667 30.58346667 0 74.27413333-17.47626667 129.4336-52.4288 66.62826667 42.5984 149.0944 66.08213333 232.10666667 66.08213333 243.02933333 0 441.27573333-197.70026667 441.27573333-441.27573333 0.54613333-81.92-23.48373333-163.84-66.08213333-230.46826667z m-40.96 64.44373334c26.2144 49.69813333 39.86773333 108.1344 39.86773333 170.3936 0 204.8-166.57066667 371.37066667-371.37066667 371.37066666-57.89013333 0-115.23413333-13.65333333-170.3936-40.41386666 85.74293333-61.71306667 180.224-143.63306667 268.6976-232.10666667 45.8752-45.32906667 156.19413333-159.47093333 233.19893334-269.24373333z" fill="#ffffff" p-id="66477"></path><path d="M475.40906667 385.29706667c49.152 0 89.01973333-39.86773333 89.01973333-89.01973334s-39.86773333-89.01973333-89.01973333-89.01973333S386.38933333 246.5792 386.38933333 295.7312c0 48.60586667 40.96 89.56586667 89.01973334 89.56586667z m-38.22933334-91.7504c0-21.2992 16.93013333-38.22933333 38.22933334-38.22933334s38.22933333 16.93013333 38.22933333 38.22933334-16.93013333 38.22933333-38.22933333 38.22933333c-20.75306667 0-38.22933333-16.93013333-38.22933334-38.22933333zM314.29973333 441.00266667c-42.05226667 0-78.09706667 35.49866667-78.09706666 78.09706666 0 42.05226667 35.49866667 78.09706667 78.09706666 78.09706667 43.69066667 0 80.2816-35.49866667 80.2816-78.09706667-0.54613333-43.14453333-36.59093333-78.09706667-80.2816-78.09706666z m0 107.04213333c-14.19946667 0-26.76053333-12.56106667-26.76053333-26.76053333s12.56106667-26.76053333 26.76053333-26.76053334c14.7456 0 28.94506667 13.1072 28.94506667 26.76053334 0 14.7456-13.1072 26.76053333-28.94506667 26.76053333zM641.4336 767.5904c27.8528 0 50.7904-22.39146667 50.7904-50.7904 0-13.65333333-5.46133333-26.2144-14.7456-35.49866667-9.28426667-9.28426667-22.39146667-14.7456-35.49866667-14.7456-27.8528 0-50.24426667 22.39146667-50.24426666 50.24426667 0 13.65333333 5.46133333 26.2144 14.7456 35.49866667 9.28426667 9.8304 21.84533333 15.29173333 34.95253333 15.29173333z" fill="#ffffff" p-id="66478"></path></svg>'
    }]);

    const menuList2: Reactive<sidebarListType[]> = reactive([{
        key: 'github',
        name: '仓库',
        call: (): Window => openGithubSite(),
        icon: '<svg t="1703493832460" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5620" width="36" height="36"><path d="M427.392 853.504a61.44 61.44 0 0 1-1.450667 15.530667 92.586667 92.586667 0 0 1-10.965333 27.605333c-15.061333 25.301333-40.661333 42.154667-73.642667 42.154667-77.653333 0-108.117333-38.101333-146.261333-133.504C169.216 740.693333 157.013333 725.461333 128 725.461333v-85.333333c77.653333 0 108.117333 38.101333 146.261333 133.504 25.856 64.597333 38.058667 79.786667 67.072 79.786667 0-12.373333-0.170667-23.296-0.512-38.144-0.853333-34.816-0.938667-41.941333 0.554667-51.2 0.64-20.352 5.888-34.773333 16.384-49.066667-95.232-20.736-159.445333-63.573333-196.309333-132.992l-13.824-32.426667C134.186667 510.848 128 467.072 128 416.426667c0-58.24 17.749333-110.336 50.944-153.856-10.368-41.386667-8.96-91.989333 13.909333-149.077334l7.466667-18.688 19.2-6.101333c2.56-0.853333 5.632-1.578667 9.301333-2.133333 37.290667-5.888 90.325333 8.106667 159.701334 52.48a565.930667 565.930667 0 0 1 127.274666-14.208c38.741333 0 77.226667 3.882667 114.048 11.605333 67.456-42.24 119.04-55.509333 155.306667-49.92 3.626667 0.597333 6.741333 1.322667 9.258667 2.133333l19.285333 6.101334 7.466667 18.773333c20.010667 50.218667 23.424 96.469333 16.128 136.96C875.434667 296.32 896 352.597333 896 416.512c0 53.888-3.84 94.378667-14.933333 133.802667l-11.733334 32.170666c-30.677333 69.333333-98.304 112.64-202.538666 133.248 10.837333 15.018667 15.872 30.250667 15.872 52.394667v42.666667l-0.042667 42.666666a13.013333 13.013333 0 0 0 0.341333 2.730667L682.666667 938.794667c-36.352 0-63.36-17.706667-76.672-45.653334a88.277333 88.277333 0 0 1-8.661334-40.277333v-84.736c0-3.584-0.128-3.797333-8.832-12.501333-23.296-23.296-33.834667-40.874667-33.834666-72.832v-38.613334l38.4-3.84c114.346667-11.52 176.512-43.221333 197.12-89.6l9.6-26.325333c7.68-27.562667 10.88-61.098667 10.88-107.946667 0-49.706667-17.365333-90.837333-50.218667-123.648L742.4 274.773333l7.381333-24.448c6.528-21.717333 8.106667-47.402667 1.152-76.714666a158.634667 158.634667 0 0 0-3.584 0.938666c-22.826667 6.4-51.370667 20.053333-85.76 43.008l-15.658666 10.453334-18.304-4.522667a467.754667 467.754667 0 0 0-111.829334-13.269333c-42.709333 0-84.906667 5.418667-123.946666 16.042666l-19.029334 5.205334-16.256-11.136c-35.541333-24.32-65.109333-38.826667-88.746666-45.568a158.293333 158.293333 0 0 0-4.864-1.28c-8.234667 33.92-4.992 61.781333 3.413333 82.688l9.984 25.088-18.346667 19.797333C228.693333 332.629333 213.333333 370.986667 213.333333 416.512c0 41.685333 4.864 76.202667 13.824 102.229333l11.178667 26.453334c27.904 52.352 87.168 83.84 192.853333 95.146666l38.144 4.096v38.357334c0 32-10.538667 49.536-33.834666 72.832-8.704 8.704-8.832 8.96-8.832 12.501333l-0.725334 7.893333c-0.512 2.56-0.512 9.258667 0.170667 37.205334 0.298667 12.8 0.469333 22.997333 0.554667 33.621333a33.962667 33.962667 0 0 1 0.725333 6.656z" p-id="5621" fill="#474A54"></path></svg>'
    }, {
        name: '设置',
        key: 'setting',
        call: (): void => dialogServiceImpl.openSettingDialog(),
        icon: '<svg t="1703494205002" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8280" width="36" height="36"><path d="M469.333333 60.693333a85.333333 85.333333 0 0 1 85.333334 0l326.826666 188.714667a85.333333 85.333333 0 0 1 42.666667 73.898667v377.386666a85.333333 85.333333 0 0 1-42.666667 73.898667L554.666667 963.306667a85.333333 85.333333 0 0 1-85.333334 0L142.506667 774.592a85.333333 85.333333 0 0 1-42.666667-73.898667v-377.386666a85.333333 85.333333 0 0 1 42.666667-73.898667z m42.666667 73.898667L185.173333 323.306667v377.386666L512 889.408l326.826667-188.714667v-377.386666L512 134.592zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 85.333334a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z" fill="#474A54" p-id="8281"></path></svg>'
    }]);

    const adminObject = {
        name: '后台',
        key: 'admin',
        call: (): void => {
            router.push("/admin");
        },
        icon: '<svg t="1749437011509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="37280" width="36" height="36"><path d="M815.98 379.92c21.84-0.2 41.83-12.04 51.39-31.48l77.52-157.47c10.42-21.18 6.46-46.86-9.88-63.91L894.3 84.57c-18.3-19.09-46.97-22.94-69.62-9.4l-156.63 93.49c-16.94 10.12-27.47 28.67-27.47 48.41v70.13l-100.32 96.14c-30.02-32.81-56.01-61.27-69.8-76.49 10.82-91.02-6.52-157.53-51.59-197.79-63.69-56.86-158.93-40.02-196.93-30.12A37.72 37.72 0 0 0 194.92 106c-3.44 13.3 0.62 27.45 10.58 36.91l62.45 59.41c-1.18 16.28-8.15 31.38-19.89 42.97-10.64 10.5-24.11 17.02-38.66 18.86l-68.29-66.01c-10.3-9.94-25.07-13.21-38.63-8.54-13.49 4.66-23.08 16.34-25.05 30.45-6.29 45.12-13.59 156.76 54.53 218.73 40.81 37.14 99.25 48.39 173.87 33.53 2.06 2.16 4.34 4.57 6.79 7.14 13.14 13.81 29.93 31.45 43.35 44.9L114.99 765.29c-22.6 22.6-36.69 51.38-39.68 81.04-3.19 31.61 6.92 61.67 27.74 82.48 18.28 18.29 43.72 28.31 71.06 28.31 3.78 0 7.59-0.19 11.42-0.57 29.66-2.99 58.44-17.09 81.03-39.68l252.02-252.01c9.58 10.32 21.64 23.9 32.87 38.29-11.86 95.35 5.6 164.39 51.94 205.3 34.38 30.35 77.67 39.1 116.13 39.1 32.77 0 62.02-6.34 79.31-11.09 13.2-3.63 23.4-14.15 26.64-27.45 3.24-13.34-1.01-27.42-11.08-36.71l-60.43-55.97a61.251 61.251 0 0 1 18.28-42.72 61.258 61.258 0 0 1 38.8-17.45c17.16 17.36 45.84 46.04 61.23 59.6 9.95 8.77 23.99 11.7 36.59 7.56 12.69-4.12 22.38-14.75 25.28-27.72 21.94-97.55 10.13-167.95-35.08-209.25-58.66-53.6-151.71-37.85-196.52-25.9l-70.59-76.98 109.16-104.59 74.87 1.04zM358.8 435.47c-8.68-9.12-15.47-16.23-18.03-18.74-9.26-9.07-22.36-12.66-35.09-9.68-59.9 14.22-103.91 9.01-130.81-15.46-25.92-23.59-36.17-65.75-37.37-108.22l35.6 34.42a37.609 37.609 0 0 0 25.8 10.67c34.92 0.47 68.73-12.92 93.94-37.76 25.2-24.85 39.08-58.02 39.08-93.42v-5.95c0-10.33-4.3-20.34-11.75-27.39l-32.68-31.08c29.48-1.76 64.73 2.19 88.91 23.79 30.15 26.93 40.01 78.55 29.33 153.37-1.6 11.04 1.7 22.1 9.08 30.37 8.99 10.07 41.01 45.15 79.39 87.1l-12.5 11.98-20.44-20.44-60.21 60.21c-12.98-13.01-29.99-30.89-42.25-43.77zM221.47 871.78c-23.12 23.09-56.67 28.54-73.32 11.94-9.87-9.88-10.11-23.66-9.37-30.99 1.49-14.85 9.26-30.27 21.31-42.33l301.16-301.17 61.38 61.38-301.16 301.17z m445.07-256.21c9.97 10.83 25.43 14.91 39.29 10.37 10.73-3.44 106.26-32.64 150.22 7.51 23.92 21.85 27.62 61.79 23.68 101.23a3202.444 3202.444 0 0 1-30.7-30.87c-6.35-6.48-14.86-10.45-23.98-11.18-36.18-2.94-71.68 10.09-97.52 35.51a124.98 124.98 0 0 0-37.11 96.93l0.35 5.65c0.66 9.74 4.98 18.72 12.04 25.19l29.6 27.42c-28.91 1.85-63.07-1.73-86.8-22.68-38.51-34-37.34-105.29-29.57-159.16 1.4-9.82-1.17-20.05-7.11-28.12-15.2-20.54-32.45-39.95-45.22-53.62l49.13-49.13-35.15-35.15 8.2-7.86 80.65 87.96z m32.65-284.84l-166.6 159.62-5.77-5.77 160.11-153.44c11.09-10.59 17.44-25.46 17.44-40.78v-69.1l147.95-88.31 33.06 34.5-73.16 148.62-73.27-1.02c-15.21-0.32-29.05 5.38-39.76 15.68z" fill="#ffffff" p-id="37281"></path></svg>'
    };

    const exitObject = {
        key: 'exit',
        name: '退出',
        call: (): void => dialogServiceImpl.openUserLogoutDialog(),
        icon: '<svg t="1749606085050" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18592" width="36" height="36"><path d="M822.751 209.777c-13.447-13.447-35.242-13.447-48.707 0-13.465 13.483-13.465 35.277 0 48.725 144.48 144.497 144.48 379.592 0 524.09-144.443 144.461-379.574 144.461-524.089 0-144.479-144.498-144.479-379.593 0-524.09 13.466-13.447 13.466-35.241 0-48.725-13.465-13.447-35.258-13.447-48.706 0C118.232 292.794 72.496 403.144 72.496 520.528S118.232 748.298 201.249 831.279c85.659 85.715 198.195 128.535 310.75 128.535s225.09-42.82 310.752-128.535c83.018-82.98 128.752-193.367 128.752-310.751S905.769 292.794 822.751 209.777zM511.999 675.958c19.041 0 34.457-15.452 34.457-34.476L546.456 98.625c0-19.023-15.416-34.438-34.457-34.438S477.542 79.602 477.542 98.625l0 542.857C477.542 660.506 492.958 675.958 511.999 675.958z" fill="#ffffff" p-id="18593"></path></svg>'
    }
</script>

<template>
    <div class="left-sidebar">
        <div class="sidebar-top">
            <div class="avatar-box" @click="dialogServiceImpl.openUserCenterDialog(applicationStore.userInfo)">
                <div class="avatar-container">
                    <img class="avatar-info" v-lazy="HandUtils.getStorageFileUrl({
                        path: applicationStore.userInfo.avatar,
                        type: StorageType.AVATAR
                    })" draggable="false" :alt="applicationStore.userInfo.nick"/>
                </div>
            </div>
        </div>

        <ul class="menu-list menu-list-1">
            <li class="menu-list-item" v-for="(item, index) in menuList1" :key="index" @click="item.call" v-html="item.icon" :data-active="router.currentRoute.value.name === item.key"></li>
            <Authority :permission="UserAuthType.ADMIN_AUTHENTICATION">
                <li class="menu-list-item" @click="adminObject.call" v-html="adminObject.icon" :data-active="router.currentRoute.value.name === adminObject.key"></li>
            </Authority>
            <Authority :permission="UserAuthType.USER_AUTHENTICATION">
                <li class="menu-list-item" @click="exitObject.call" v-html="exitObject.icon"></li>
            </Authority>
        </ul>

        <ul class="menu-list menu-list-2">
            <li class="menu-list-item" v-for="(item, index) in menuList2" :key="index" @click="item.call" v-html="item.icon"></li>
        </ul>
    </div>
</template>